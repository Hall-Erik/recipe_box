{% extends "layout.html" %}
{% block content %}
	<div class="content-section">
		<div class="row">
			<div class="col-sm-10">
				<h2>{{ recipe.title }}</h2>
			</div>
			{% if recipe.author == current_user %}
			<div class="ml-3">
				<a class="btn btn-info" href="{{ url_for('recipes.edit_recipe', recipe_id=recipe.id) }}">Edit</a>
				<button class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">Delete</button>
			</div>
			{% endif %}
		</div>
		<div class="row">
			<img style="width: 200px; height: 200px;" src="{{ recipe.get_image_url() }}" />
		</div>
		<div class="row">
			<small class="text-muted">User: <a href="{{ url_for('users.user_recipes', user_id=recipe.author.id) }}">{{ recipe.author.username }}</a></small>
		</div>
		<div class="row">
			<small class="text-muted">
				Cook time: {% if recipe.cook_time %}{{ recipe.cook_time }}{% else %}?{% endif %} minutes
			</small>
		</div>
		<div class="row">
			<small class="text-muted">
				Serves: {% if recipe.servings %}{{ recipe.servings }}{% else %}?{% endif%}
			</small>
		</div>
		<div class="row">
			<p>{{ recipe.description }}</p>
		</div>
		{% if recipe.ingredients %}
			<div class="row">
				<h3>Ingredients</h3>
			</div>
			<div class="row">
				<ul>
					{% set ingredients = recipe.ingredients.split('\r\n') %}
					{% for ingredient in ingredients %}
					<li>{{ ingredient }}</li>
					{% endfor %}
				</ul>
			</div>
		{% endif %}
		{% if recipe.directions %}
			<div class="row">			
				<h3>Directions</h3>
			</div>	
			<div class="row">
				<ol>
					{% set directions = recipe.directions.split('\r\n') %}
					{% for direction in directions %}
					<li>{{ direction }}</li>
					{% endfor %}
				</ol>
			</div>
		{% endif %}
	</div>

    <!-- Modal -->
  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete Recipe?</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <form action="{{ url_for('recipes.delete_recipe', recipe_id=recipe.id) }}" method="POST">
            <input class="btn btn-danger" type="submit" value="Delete">
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
